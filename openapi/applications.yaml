openapi: 3.1.0
info:
  title: Application Service API
  version: 1.0.0
  description: |
    REST API for managing public assistance applications. The specification defines CRUD operations
    for creating, reading, updating, and deleting applications for SNAP, Cash Programs, and Medical Assistance.
  contact:
    name: API Support
    email: support@example.com
servers:
- url: https://api.example.com
  description: Production server
- url: http://localhost:8080
  description: Local development server
tags:
- name: Applications
  description: Manage public assistance applications.
paths:
  "/applications":
    get:
      summary: List applications
      description: Retrieve a paginated list of applications.
      operationId: listApplications
      tags:
      - Applications
      parameters:
      - "$ref": "./components/common-parameters.yaml#/LimitParam"
      - "$ref": "./components/common-parameters.yaml#/OffsetParam"
      responses:
        '200':
          description: A paginated collection of applications.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/ApplicationList"
        '400':
          "$ref": "./components/common-responses.yaml#/BadRequest"
        '500':
          "$ref": "./components/common-responses.yaml#/InternalError"
    post:
      summary: Create an application
      description: Create a new public assistance application.
      operationId: createApplication
      tags:
      - Applications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/ApplicationCreate"
      responses:
        '201':
          description: Application created successfully.
          headers:
            Location:
              description: URL of the newly created application resource.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/Application"
        '400':
          "$ref": "./components/common-responses.yaml#/BadRequest"
        '422':
          "$ref": "./components/common-responses.yaml#/UnprocessableEntity"
        '500':
          "$ref": "./components/common-responses.yaml#/InternalError"
  "/applications/{applicationId}":
    parameters:
    - "$ref": "#/components/parameters/ApplicationIdParam"
    get:
      summary: Get an application
      description: Retrieve a single application by identifier.
      operationId: getApplication
      tags:
      - Applications
      responses:
        '200':
          description: Application retrieved successfully.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/Application"
              examples:
                ApplicationExample1:
                  "$ref": "./examples/applications.yaml#/ApplicationExample1"
        '404':
          "$ref": "./components/common-responses.yaml#/NotFound"
        '500':
          "$ref": "./components/common-responses.yaml#/InternalError"
    patch:
      summary: Update an application
      description: Apply partial updates to an existing application.
      operationId: updateApplication
      tags:
      - Applications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/ApplicationUpdate"
      responses:
        '200':
          description: Application updated successfully.
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/Application"
        '400':
          "$ref": "./components/common-responses.yaml#/BadRequest"
        '404':
          "$ref": "./components/common-responses.yaml#/NotFound"
        '422':
          "$ref": "./components/common-responses.yaml#/UnprocessableEntity"
        '500':
          "$ref": "./components/common-responses.yaml#/InternalError"
    delete:
      summary: Delete an application
      description: Permanently remove an application record.
      operationId: deleteApplication
      tags:
      - Applications
      responses:
        '204':
          description: Application deleted successfully.
        '404':
          "$ref": "./components/common-responses.yaml#/NotFound"
        '500':
          "$ref": "./components/common-responses.yaml#/InternalError"
components:
  parameters:
    ApplicationIdParam:
      name: applicationId
      in: path
      required: true
      description: Unique identifier of the application.
      schema:
        type: string
        format: uuid
      example: 7f8e9d0c-1b2a-3c4d-5e6f-7a8b9c0d1e2f
  schemas:
    Application:
      "$ref": "./components/application.yaml#/Application"
    ApplicationCreate:
      allOf:
      - "$ref": "./components/application.yaml#/Application"
      - type: object
        description: |
          Payload to create a new application. The programs object must specify at least one program:
          - snap: true for SNAP applications
          - cashPrograms: object with tanfProgram and/or adultFinancial set to true for Cash Programs applications
          - medicalAssistance: true for Medical Assistance applications
          
          A single application can include multiple programs. Field descriptions indicate which programs
          each field is optional for (marked with ■ for SNAP, ◆ for Cash Programs, ○ for Medical Assistance).
          
          Note: id, createdAt, and updatedAt are server-generated (readOnly) and will be returned in the response.
        required:
        - programs
    ApplicationUpdate:
      allOf:
      - "$ref": "./components/application.yaml#/Application"
      - type: object
        description: |
          Payload to update one or more fields of an existing application. Partial updates are supported.
          The programs object can be updated to add or remove programs, but at least one program must remain.
          
          Note: id, createdAt, and updatedAt are server-generated (readOnly) and cannot be updated.
    ApplicationList:
      type: object
      additionalProperties: false
      required:
      - items
      - total
      - limit
      - offset
      properties:
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Application"
        total:
          type: integer
          minimum: 0
          description: Total number of applications available.
        limit:
          type: integer
          minimum: 1
          maximum: 100
          description: Maximum number of applications requested.
        offset:
          type: integer
          minimum: 0
          description: Number of items skipped before the current page.
        hasNext:
          type: boolean
          description: Indicates whether more applications are available beyond the current page.

