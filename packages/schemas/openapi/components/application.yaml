# Application resource - application for public assistance programs
#
# Contains HouseholdMember which extends Person with eligibility-specific data.
# Schemas here contain point-in-time eligibility data; persistent data is in person.yaml.
#
# Domain Container Hierarchy:
#
#   Application
#     ├── screeningFlags          ApplicationScreeningFlags - flags organized by domain
#     ├── preferences             ApplicationPreferences - consents and delivery preferences
#     ├── household
#     │     ├── members[]         HouseholdMember - see below
#     │     ├── otherOccupants[]  HouseholdOccupant - boarders, roomers
#     │     ├── expenses          HouseholdExpenses - rent, mortgage, utilities
#     │     └── healthInsurancePlans{}  HealthInsurancePlan - plans keyed by name
#     ├── expeditedSNAPInfo       ExpeditedSNAPInfo - expedited screening
#     ├── signatures              Applicant and representative signatures
#     ├── applicationAssister     ApplicationAssister
#     └── authorizedRepresentative AuthorizedRepresentative
#
#   HouseholdMember (extends Person)
#     ├── relationship            Relationship to primary applicant
#     ├── programsApplyingFor[]   Programs this person is applying for
#     ├── citizenshipInfo         CitizenshipInfo (extends Person's)
#     ├── contactInfo             ContactInfo (extends Person's)
#     ├── disabilityInfo          DisabilityInfo
#     ├── employmentHistory[]     JobIncomeInfo
#     ├── expenses                ExpenseInfo
#     ├── familyPlanningInfo      FamilyPlanningInfo
#     ├── financialAidInfo        FinancialAidInfo
#     ├── fosterCareInfo          FosterCareHistory
#     ├── healthInfo              HealthInfo
#     ├── healthInsuranceEnrollments[]  HealthInsuranceEnrollment
#     ├── incomeChangeInfo        IncomeChangeInfo
#     ├── institutionalizedInfo   InstitutionalizedInfo
#     ├── lumpSumPayments[]       LumpSumPayment
#     ├── nonCitizenApplicationInfo NonCitizenApplicationInfo
#     ├── pastBenefitsFromOtherStates PastBenefitsFromOtherStates
#     ├── priorConvictions        PriorConvictionsInfo
#     ├── resourceInfo            ResourceInfo
#     ├── retroactiveMedicalRequest RetroactiveMedicalRequest
#     ├── selfEmployment[]        SelfEmploymentRecord
#     ├── strikeInfo              StrikeInfo
#     ├── taxFilingInfo           TaxFilingInfo
#     ├── transferredAssets[]     TransferredAsset
#     ├── tribalInfo              TribalInfo (extends Person's)
#     ├── unearnedIncomeSources[] UnearnedIncomeSource
#     └── absentParents[]         AbsentParent (for children)
#
#   External Person Types:
#     - ExternalPerson            Base for non-household persons (extends PersonIdentity)
#     - AbsentParent              Absent parent for a child
#     - ApplicationAssister       Person assisting with application
#     - AuthorizedRepresentative  Representative authorized by applicant
#
#   Supporting Schemas:
#     - (Various expense, income, health coverage, and resource details)

Application:
  type: object
  description: Application schema for public assistance programs. Supports applying for SNAP, Cash Programs, and/or Medical Assistance simultaneously.
  additionalProperties: false
  required:
    - id
    - household
    - createdAt
    - updatedAt
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the application.
      readOnly: true
    state:
      type: string
      pattern: "^[A-Z]{2}$"
      description: Two-letter state code where the application is being submitted (e.g., CO, CA, NY).
      example: CO
    status:
      type: string
      description: Current status of the application.
      enum:
        - draft
        - submitted
        - under_review
        - approved
        - denied
        - pending_information
        - withdrawn
    screeningFlags:
      $ref: "#/ApplicationScreeningFlags"
      description: Flags indicating screening criteria relevant to this application.
    preferences:
      $ref: "#/ApplicationPreferences"
      description: Application preferences and consents.
    household:
      type: object
      description: Household information including members, occupants, expenses, and related data.
      additionalProperties: false
      required:
        - members
      properties:
        members:
          type: array
          description: |
            IRS-recognized household members for benefits eligibility, including the primary
            applicant (relationship=self). At least one member with relationship=self is required.
          minItems: 1
          items:
            $ref: "#/HouseholdMember"
        otherOccupants:
          type: array
          description: |
            Other people living at the address who are not part of the household unit for
            benefits purposes (e.g., boarders, roomers).
          items:
            $ref: "#/HouseholdOccupant"
        expenses:
          $ref: "#/HouseholdExpenses"
          description: Household-level expense information (rent/mortgage/utilities).
        healthInsurancePlans:
          type: object
          description: >
            Health insurance plans available to household members, keyed by plan name.
            The key must match the plan's `planName` property.
          additionalProperties:
            $ref: "#/HealthInsurancePlan"
    expeditedSNAPInfo:
      $ref: "#/ExpeditedSNAPInfo"
      description: Expedited SNAP screening information.
    signatures:
      type: object
      description: Application signatures.
      additionalProperties: false
      properties:
        applicantSignature:
          $ref: "./common.yaml#/Signature"
          description: Primary applicant signature.
        coApplicantSignature:
          $ref: "./common.yaml#/Signature"
          description: Spouse/co-applicant signature if applicable.
        applicantAuthorizedRepresentativeSignature:
          $ref: "./common.yaml#/Signature"
          description: Authorized representative signature for the applicant.
        coApplicantAuthorizedRepresentativeSignature:
          $ref: "./common.yaml#/Signature"
          description: Authorized representative signature for the co-applicant.
    applicationAssister:
      $ref: "#/ApplicationAssister"
      description: The person who helped complete this application.
    authorizedRepresentative:
      $ref: "#/AuthorizedRepresentative"
      description: Authorized representative for the applicant.
    createdAt:
      type: string
      format: date-time
      description: Timestamp when the application was created.
      readOnly: true
    updatedAt:
      type: string
      format: date-time
      description: Timestamp when the application was last updated.
      readOnly: true

# IRS-recognized household member for benefits eligibility
# Extends Person with application-specific fields
HouseholdMember:
  allOf:
    - $ref: "./person.yaml#/Person"
    - type: object
      description: |
        An IRS-recognized household member for benefits eligibility. Extends Person with
        application-specific fields for eligibility determination. Includes the primary
        applicant (relationship=self) and other household members.
      required:
        - name
        - relationship
      properties:
        # Application-specific fields
        relationship:
          type: string
          description: |
            Relationship to primary applicant. Use "self" for the primary applicant.
          enum:
            - self
            - spouse
            - child
            - parent
            - sibling
            - other_relative
            - non_relative
        programsApplyingFor:
          type: array
          description: Programs this person is applying for. Empty array or omitted means not applying for any programs.
          items:
            $ref: "./common.yaml#/Program"
        institutionalizedInfo:
          $ref: "#/InstitutionalizedInfo"
          description: Information about institutionalization if this person is temporarily in an institution.

        # Disability Info (eligibility determination)
        disabilityInfo:
          $ref: "#/DisabilityInfo"
          description: Disability and SSI/SSDI information for this person.

        hasLegalClaim:
          type: boolean
          description: Whether this person has a legal claim related to medical care.

        # Expenses
        expenses:
          $ref: "#/ExpenseInfo"
          description: Expenses paid by or for this person.

        # Income Changes (for health insurance eligibility)
        incomeChangeInfo:
          $ref: "#/IncomeChangeInfo"
          description: Income change information for health insurance eligibility.

        # Foster Care
        fosterCareInfo:
          $ref: "#/FosterCareHistory"
          description: Foster care history for this person.

        # Absent Parents (for children with relationship=child)
        absentParents:
          type: array
          description: Absent parents for this child.
          items:
            $ref: "#/AbsentParent"

        # Employment (for eligibility)
        employmentHistory:
          type: array
          description: Employment history for this person (jobs with endDate are past jobs).
          items:
            $ref: "#/JobIncomeInfo"
        selfEmployment:
          type: array
          description: Self-employment businesses for this person.
          items:
            $ref: "#/SelfEmploymentRecord"

        # Unearned Income (point-in-time for eligibility)
        unearnedIncomeSources:
          type: array
          description: Unearned income sources for this person.
          items:
            $ref: "#/UnearnedIncomeSource"
        lumpSumPayments:
          type: array
          description: Lump sum payments received by this person.
          items:
            $ref: "#/LumpSumPayment"
        strikeInfo:
          $ref: "#/StrikeInfo"
          description: Strike information if this person is on strike.

        # Non-citizen application info
        nonCitizenApplicationInfo:
          $ref: "#/NonCitizenApplicationInfo"
          description: Application-specific information for non-citizens.

        # Family Planning (includes pregnancy)
        familyPlanningInfo:
          $ref: "#/FamilyPlanningInfo"
          description: Family planning and pregnancy information for this person.

        # Financial Aid (eligibility determination)
        financialAidInfo:
          $ref: "#/FinancialAidInfo"
          description: Financial aid information for this person.

        # Prior Convictions (eligibility determination)
        priorConvictions:
          $ref: "#/PriorConvictionsInfo"
          description: Prior convictions information for this person.

        # Tax Filing Info (eligibility determination)
        taxFilingInfo:
          $ref: "#/TaxFilingInfo"
          description: Tax filing information for this person.

        # Resources (eligibility determination)
        resourceInfo:
          $ref: "#/ResourceInfo"
          description: Financial resources and assets for this person.

        # Transferred Assets (eligibility - lookback period)
        transferredAssets:
          type: array
          description: Assets transferred by this person.
          items:
            $ref: "#/TransferredAsset"

        # Retroactive Coverage Request
        retroactiveMedicalRequest:
          $ref: "#/RetroactiveMedicalRequest"
          description: Request for retroactive medical coverage for this person.

        # Health Info (overrides Person's - has eligibility fields)
        healthInfo:
          $ref: "#/HealthInfo"
          description: Health and insurance coverage information for eligibility determination.

        # Tribal Info (overrides Person's - has income fields)
        tribalInfo:
          $ref: "#/TribalInfo"
          description: Tribal information extended with income eligibility fields.

        # Citizenship Info (overrides Person's - has extended immigration fields)
        citizenshipInfo:
          $ref: "#/CitizenshipInfo"
          description: Citizenship information extended with eligibility immigration fields.

        # Contact Info (overrides Person's - has isStateResident)
        contactInfo:
          $ref: "#/ContactInfo"
          description: Contact information extended with eligibility fields.

        # Health Insurance Enrollments
        healthInsuranceEnrollments:
          type: array
          description: This person's enrollments or eligibilities for health insurance plans.
          items:
            $ref: "#/HealthInsuranceEnrollment"

        # Past benefits from other states
        pastBenefitsFromOtherStates:
          $ref: "#/PastBenefitsFromOtherStates"
          description: Information about SNAP or cash benefits received in another state in the last 30 days.

# Ancillary schemas (alphabetical order)

ApplicationPreferences:
  type: object
  description: Application preferences and consents.
  additionalProperties: false
  properties:
    givesPermissionToValidateIncome:
      type: boolean
      description: Whether the applicant gives permission to validate income.
    wantsToRegisterToVote:
      type: boolean
      description: Whether the applicant wants to register to vote.
    burialPreference:
      type: string
      enum:
        - cremation
        - burial
        - no_preference
      description: Preferred burial arrangement.
    ebtCardDeliveryMethod:
      type: string
      enum:
        - postal_mail
        - in_person
      description: Preferred method for receiving the EBT card.

ApplicationScreeningFlags:
  type: object
  description: |
    Flags indicating screening criteria relevant to this application, organized by domain.
    Presence of a flag in an array indicates the condition is true.
  additionalProperties: false
  properties:
    programs:
      type: object
      description: Program-specific screening flags.
      additionalProperties: false
      properties:
        applyingFor:
          type: array
          description: Programs being applied for by one or more household members.
          items:
            $ref: "./common.yaml#/Program"
        needsEbtCard:
          type: boolean
          description: Whether the applicant needs an EBT card.
    familyPlanning:
      type: array
      description: Family planning and dependent-related flags.
      items:
        type: string
        enum:
          - family_planning_needs
          - pregnancy
          - wants_reproductive_benefits
          - child_under_19
          - absent_parent
          - wants_family_violence_waiver
    disability:
      type: array
      description: Disability-related flags.
      items:
        type: string
        enum:
          - disability
          - received_ssi_or_ssdi
    citizenship:
      type: array
      description: Citizenship and immigration-related flags.
      items:
        type: string
        enum:
          - non_citizens
          - wants_emergency_medicaid
    medicalCoverage:
      type: array
      description: Medical coverage and health-related flags.
      items:
        type: string
        enum:
          - has_health_insurance
          - legal_claim
          - wants_retroactive_medical
    tribal:
      type: array
      description: American Indian or Alaska Native-related flags.
      items:
        type: string
        enum:
          - american_indian_or_alaska_native
          - received_indian_health_service
          - eligible_for_indian_health_service
    fosterCareAndBenefitsHistory:
      type: array
      description: Foster care and benefits history flags.
      items:
        type: string
        enum:
          - foster_care_history
          - received_benefits_other_state
    jobs:
      type: array
      description: Employment and income change flags.
      items:
        type: string
        enum:
          - has_employment
          - has_self_employment
          - has_job_changes
          - expected_income_change
          - income_differences
          - is_anyone_on_strike
    otherIncome:
      type: array
      description: Unearned income-related flags.
      items:
        type: string
        enum:
          - has_other_income
          - has_lump_sum_payments
          - deductions_change_monthly
    expenses:
      type: array
      description: Housing and expense-related flags.
      items:
        type: string
        enum:
          - has_rent_expenses
          - has_mortgage_expenses
          - has_additional_expenses
    education:
      type: array
      description: Education-related flags.
      items:
        type: string
        enum:
          - has_students
          - has_financial_aid
    resources:
      type: array
      description: Resource and asset-related flags.
      items:
        type: string
        enum:
          - has_resources
          - has_vehicles
          - has_life_or_burial_insurance
          - owns_property
          - has_transferred_assets
    priorConvictions:
      type: array
      description: Prior conviction-related flags.
      items:
        type: string
        enum:
          - has_prior_convictions
    military:
      type: array
      description: Military service-related flags.
      items:
        type: string
        enum:
          - has_military_service

AbsentParent:
  allOf:
    - $ref: "#/ExternalPerson"
    - type: object
      description: An absent parent for a child on the application.
      properties:
        triedToGetMedicalSupport:
          type: boolean
          description: Whether applicant tried to get medical support from this absent parent.

AdditionalExpense:
  type: object
  description: Additional expense item (childcare, medical, child support, etc.).
  additionalProperties: false
  properties:
    expenseType:
      type: string
      enum:
        - child_daycare
        - adult_daycare
        - legally_obligated_child_support
        - child_support_arrears
        - medical_expenses
        - student_loan_interest
        - alimony
    monthOfExpense:
      type: string
      format: date
    amountPaid:
      type: number
      minimum: 0
    legallyObligatedAmount:
      type: number
      minimum: 0

ApplicationAssister:
  allOf:
    - $ref: "#/ExternalPerson"
    - type: object
      description: A person who helped complete an application.

AuthorizedRepresentative:
  allOf:
    - $ref: "#/ExternalPerson"
    - type: object
      description: An authorized representative who can act on behalf of the applicant.
      properties:
        isIndividual:
          type: boolean
          description: Whether the representative is an individual (vs organization).
        organizationId:
          type: string
          maxLength: 50
          description: Organization identifier if not an individual.
        inCareOf:
          type: string
          maxLength: 200
          description: Care of line for address.
        receiveNotices:
          type: boolean
          description: Whether this representative should receive official notices.
        applicantSignature:
          $ref: "./common.yaml#/Signature"
          description: Applicant's signature authorizing this representative.
        authorizedRepresentativeSignature:
          $ref: "./common.yaml#/Signature"
          description: The authorized representative's signature.

CitizenshipInfo:
  allOf:
    - $ref: "./person.yaml#/CitizenshipInfo"
    - type: object
      description: Citizenship information extended with eligibility immigration fields.
      properties:
        immigrationInfo:
          $ref: "#/ImmigrationInfo"
          description: Immigration information extended with eligibility fields.

ContactInfo:
  allOf:
    - $ref: "./person.yaml#/ContactInfo"
    - type: object
      description: Contact information extended with eligibility fields.
      properties:
        isStateResident:
          type: boolean
          description: Whether the person is a resident of the state (for eligibility).

DeductionItem:
  type: object
  description: A deduction that affects income for health insurance eligibility.
  additionalProperties: false
  properties:
    deductionType:
      type: string
      description: Type of deduction.
      enum:
        - alimony_paid
        - capital_losses
        - early_withdrawal_penalty
        - student_loan_interest
        - domestic_production_activities
        - reimbursement_of_expenses
        - hsa_deduction
        - moving_expenses
        - traditional_ira_contribution
        - reservist_performing_artist_government_official_expenses
        - other
    deductionTypeOther:
      type: string
      maxLength: 200
      description: Description if deductionType is 'other'.
    frequency:
      type: string
      description: How often the deduction occurs.
      enum:
        - one_time_only
        - weekly
        - every_two_weeks
        - twice_monthly
        - monthly
        - yearly
    currentAmount:
      type: number
      minimum: 0
      description: Current deduction amount.
    actualAnnualAmount:
      type: number
      minimum: 0
      description: Actual annual deduction amount.

DisabilityInfo:
  type: object
  description: Disability and SSI/SSDI information for eligibility determination.
  additionalProperties: false
  properties:
    hasDisability:
      type: boolean
      description: Whether this person has a disability.
    needsHelpWithSelfCare:
      type: boolean
      description: Whether this person needs help with self-care activities.
    hasMedicalOrDevelopmentalCondition:
      type: boolean
      description: Whether this person has a medical or developmental condition.
    socialSecurityApplications:
      type: array
      description: SSI/SSDI applications for this person.
      items:
        $ref: "#/SocialSecurityApplication"
    hasReceivedSsiOrSsdi:
      type: boolean
      description: Whether this person has ever received SSI or SSDI (if not currently applied).
    ssiOrSsdiEndDate:
      type: string
      format: date
      description: Date SSI or SSDI benefits ended for this person (if applicable).

ExpenseInfo:
  type: object
  description: Expenses paid by or for this person.
  additionalProperties: false
  properties:
    rent:
      type: array
      items:
        $ref: "#/RentExpense"
    mortgage:
      type: array
      items:
        $ref: "#/MortgageExpense"
    utilities:
      type: array
      items:
        $ref: "#/UtilityExpense"
    additionalExpenses:
      type: array
      items:
        $ref: "#/AdditionalExpense"

ExpeditedSNAPInfo:
  type: object
  description: Expedited SNAP screening information for faster processing.
  additionalProperties: false
  properties:
    householdSize:
      type: integer
      minimum: 1
      description: Number of people in the home who purchase and prepare food together.
    isMigrantOrSeasonalFarmWorker:
      type: boolean
      description: Whether any household member is a migrant or seasonal farm worker.
    totalExpectedIncomeThisMonth:
      type: number
      minimum: 0
      description: Total money household expects to get this month (before deductions).
    totalCashOnHand:
      type: number
      minimum: 0
      description: Total cash on hand and money in checking/savings account.
    monthlyMortgage:
      type: number
      minimum: 0
      description: Monthly mortgage payment amount.
    monthlyRent:
      type: number
      minimum: 0
      description: Monthly rent payment amount.
    utilityCosts:
      type: object
      description: Monthly utility costs.
      additionalProperties: false
      properties:
        electricity:
          type: number
          minimum: 0
        water:
          type: number
          minimum: 0
        phone:
          type: number
          minimum: 0
        trash:
          type: number
          minimum: 0
        sewer:
          type: number
          minimum: 0
        other:
          type: number
          minimum: 0

ExternalPerson:
  allOf:
    - $ref: "./person.yaml#/PersonIdentity"
    - type: object
      description: |
        A person referenced in an application who is not a household member.
        Used as a base for AbsentParent, AuthorizedRepresentative, and ApplicationAssister.

FamilyPlanningInfo:
  type: object
  description: Family planning and pregnancy information.
  additionalProperties: false
  properties:
    wantsFamilyPlanningBenefits:
      type: boolean
      description: Whether this person wants family planning benefits.
    dueDate:
      type: string
      format: date
      description: Expected due date if pregnant.
    numberOfBabiesExpected:
      type: integer
      minimum: 1
      description: Number of babies expected if pregnant.
    fatherName:
      type: string
      maxLength: 200
      description: Name of the father.
    wantsGoodCauseFromChildSupport:
      type: boolean
      description: Whether this person wants good cause exemption from child support cooperation.

FederalHealthBenefit:
  type: object
  description: Federal health benefit program enrollment.
  additionalProperties: false
  properties:
    programTypeOrName:
      type: string
      maxLength: 200
    insuranceCompanyName:
      type: string
      maxLength: 200
    policyNumber:
      type: string
      maxLength: 100

FinancialAidInfo:
  type: object
  description: Financial aid information for eligibility determination.
  additionalProperties: false
  properties:
    hasFinancialAid:
      type: boolean
      description: Whether this person receives financial aid as a student.
    grantsScholarshipsWorkStudyForLivingExpenses:
      type: number
      minimum: 0
      description: Amount of grants/scholarships/work-study used for living expenses.
    taxableGrantsScholarshipsWorkStudy:
      type: number
      minimum: 0
      description: Amount of taxable grants/scholarships/work-study.

FosterCareHistory:
  type: object
  description: Foster care history for a person.
  additionalProperties: false
  properties:
    nameUsedInOutOfStateFosterCare:
      type: string
      maxLength: 200
      description: Name used in out-of-state foster care, if different from current name.
    dateLeftFosterCare:
      type: string
      format: date
      description: Date the person left foster care, if known.
    wasAdopted:
      type: boolean
      description: Whether the person was adopted.
    returnedToFosterCareAfterAdoption:
      type: boolean
      description: If adopted, whether the person returned to foster care after adoption.
    dateReturnedToFosterCare:
      type: string
      format: date
      description: Date the person returned to foster care after adoption, if applicable.
    dateOfStateResidency:
      type: string
      format: date
      description: Date the person became a resident of the state.
    needsHelpPayingMedicalBills:
      type: boolean
      description: Whether the person needs help paying medical bills.
    medicalBillsMonths:
      type: array
      description: Months for which the person needs help paying medical bills.
      items:
        type: string
        format: date

FinancialResource:
  type: object
  description: Financial resource or asset.
  additionalProperties: false
  properties:
    resourceType:
      type: string
      enum:
        - cash_on_hand
        - checking_account
        - savings_account
        - stocks
        - bonds
        - mutual_funds
        - 401k
        - ira
        - trusts
        - cds
        - annuities
        - college_funds
        - pass_accounts
        - idas
        - promissory_notes
        - education_accounts
        - other
    financialInstitutionName:
      type: string
      maxLength: 200
    accountNumber:
      type: string
      maxLength: 100
    currentValue:
      type: number
      minimum: 0

HouseholdExpenses:
  type: object
  description: Household-level expense information.
  additionalProperties: false
  properties:
    rent:
      $ref: "#/RentExpenses"
      description: Rent expenses and settings.
    mortgage:
      $ref: "#/MortgageExpenses"
      description: Mortgage expenses and settings.
    utilities:
      type: object
      description: Utility-related settings for the household.
      additionalProperties: false
      properties:
        heatingCoolingMethod:
          type: array
          description: Methods used for heating and cooling.
          items:
            type: string
            enum:
              - electric
              - gas
              - firewood
              - propane
              - swamp_cooler
              - other
        otherHeatingCoolingType:
          type: string
          description: Description of other heating/cooling method if selected.
          maxLength: 100
        receivedLEAP:
          type: boolean
          description: Whether household received Low-Income Energy Assistance Program benefits.

HouseholdOccupant:
  allOf:
    - $ref: "./person.yaml#/PersonIdentity"
    - type: object
      description: |
        A person living at the address who is not part of the household unit for benefits purposes
        (e.g., boarders, roomers). Only minimal identity information is required.
      properties:
        occupantType:
          type: string
          description: Type of occupant.
          enum:
            - roomer
            - boarder
            - other
        rentPaidToHousehold:
          type: number
          minimum: 0
          description: Amount paid for rent per month to the household.
        mealsIncluded:
          type: boolean
          description: Whether meals are included with the rent.

HousingExpenseItem:
  type: object
  description: Housing expense item (shared by rent and mortgage).
  additionalProperties: false
  properties:
    expenseType:
      type: string
      description: Type of housing expense.
      enum:
        # Rent types
        - rent
        - renters_insurance
        - pet_fee
        - washer_dryer_fee
        - condo_fee
        - maintenance_fee
        # Mortgage types
        - mortgage
        - homeowners_insurance
        - property_taxes
        - hoa_fees
        - other
    whoPays:
      type: string
      maxLength: 200
      description: Name of the person who pays this expense.
    isPayerInHome:
      type: boolean
      description: Whether the person who pays lives in the home.
    expenseFor:
      type: string
      maxLength: 200
      description: Who the expense is for.
    expenseMonth:
      type: string
      format: date
      description: Month of the expense.
    amountPaid:
      type: number
      minimum: 0
      description: Amount paid for this expense.

HealthCoverageDetail:
  type: object
  description: Health insurance coverage detail.
  additionalProperties: false
  properties:
    typeOfCoverage:
      type: string
      enum:
        - medicare
        - tricare
        - va_health_care
        - peace_corps
        - cobra
        - retiree_health_plan
        - current_employer_sponsored
        - railroad_retirement_insurance
    coverageStartDate:
      type: string
      format: date
    coverageEndDate:
      type: string
      format: date
    enrollmentStatus:
      type: string
      enum:
        - eligible
        - enrolled

HealthInfo:
  type: object
  description: Health and insurance coverage information for eligibility determination.
  additionalProperties: false
  properties:
    healthCoverage:
      type: array
      description: Health insurance coverage details for this person.
      items:
        $ref: "#/HealthCoverageDetail"
    medicare:
      $ref: "#/MedicareInfo"
      description: Medicare coverage information for this person.
    federalHealthBenefits:
      type: array
      description: Federal health benefit programs this person is enrolled in.
      items:
        $ref: "#/FederalHealthBenefit"

HealthInsuranceEnrollment:
  type: object
  description: A household member's enrollment or eligibility for a health insurance plan.
  additionalProperties: false
  properties:
    planName:
      type: string
      description: References a plan by name in the household's healthInsurancePlans map.
      minLength: 1
    status:
      type: string
      description: Whether the person is eligible for or enrolled in the plan.
      enum:
        - eligible
        - enrolled
    coverageStartDate:
      type: string
      format: date
      description: Date coverage started.
    coverageEndDate:
      type: string
      format: date
      description: Date coverage ended or will end.
    couldStartCoverageDate:
      type: string
      format: date
      description: Date when coverage could start if not yet enrolled.
    lostCoverageDate:
      type: string
      format: date
      description: Date coverage was lost.
    premiumAmount:
      type: number
      minimum: 0
      description: Premium amount this person pays.
    premiumAmountUnknown:
      type: boolean
      description: Whether the premium amount is unknown.
    premiumFrequency:
      type: string
      description: How often premiums are paid.
      enum:
        - weekly
        - every_two_weeks
        - twice_monthly
        - monthly
        - yearly

HealthInsurancePlan:
  type: object
  description: A health insurance plan available to household members, keyed by plan name.
  additionalProperties: false
  required:
    - planType
    - planName
  properties:
    planName:
      type: string
      description: Unique name for this plan within the application (used as map key).
      minLength: 1
    planType:
      type: string
      description: Type of health insurance plan.
      enum:
        - medicare
        - tricare
        - va_health_care
        - peace_corps
        - cobra
        - retiree_health_plan
        - employer_sponsored
        - railroad_retirement
    # For employer-sponsored plans
    employer:
      $ref: "./common.yaml#/EmployerInfo"
      description: Employer offering the coverage (for employer_sponsored plans).
    contactAboutCoverage:
      type: string
      maxLength: 200
      description: Contact person for questions about coverage (for employer_sponsored plans).
    hasEmployeeOnlyPlanMeetingMinimumValue:
      type: boolean
      description: Whether an employee-only plan meeting minimum value is available.
    lowestCostPlanName:
      type: string
      maxLength: 200
      description: Name of the lowest cost plan available.
    lowestCostPlanUnknown:
      type: boolean
      description: Whether the lowest cost plan is unknown.
    noPlansMeetMinimumValue:
      type: boolean
      description: Whether no plans meet minimum value requirements.
    # For non-employer plans
    insuranceCompanyName:
      type: string
      maxLength: 200
      description: Name of the insurance company (for non-employer plans).
    policyNumber:
      type: string
      maxLength: 100
      description: Policy number (for non-employer plans).

IncomeChangeInfo:
  type: object
  description: Income change information for health insurance eligibility determination.
  additionalProperties: false
  properties:
    changeReason:
      type: string
      description: Reason for income change.
      enum:
        - stopped_working
        - hours_changed
        - employment_change
        - marriage_or_divorce
        - other
    expectedAnnualIncome:
      type: number
      minimum: 0
      description: Expected annual income.
    expectedIncomeChange:
      type: string
      description: How income is expected to change compared to last year.
      enum:
        - same
        - lower
        - higher
        - unknown
    pastIncomeAmount:
      type: number
      minimum: 0
      description: Past income amount for the relevant period.
    pastDeductionsAmount:
      type: number
      minimum: 0
      description: Past deductions amount for the relevant period.
    deductionsChangeMonthly:
      type: boolean
      description: Whether deductions change from month to month.
    deductions:
      type: array
      description: Deductions that affect income for health insurance eligibility.
      items:
        $ref: "#/DeductionItem"

ImmigrationInfo:
  allOf:
    - $ref: "./person.yaml#/ImmigrationInfo"
    - type: object
      description: Immigration information extended with eligibility fields.
      properties:
        livedInUSSince1996:
          type: boolean
          description: Whether the person has lived in the US continuously since August 22, 1996.
        spouseOrParentIsVeteranOrActiveDuty:
          type: boolean
          description: Whether spouse or parent is a veteran or active duty military.

InstitutionalizedInfo:
  type: object
  description: Information about institutionalization if a person is temporarily in an institution.
  additionalProperties: false
  properties:
    isInstitutionalized:
      type: boolean
      description: Whether this person is temporarily in an institution.
    dateEntered:
      type: string
      format: date
      description: Date the person entered the institution.
    facilityName:
      type: string
      maxLength: 200
      description: Name of the facility.
    facilityType:
      type: string
      enum:
        - nursing_home
        - hospital
        - mental_health_institution
        - incarceration
        - other
      description: Type of facility.
    isPendingDisposition:
      type: boolean
      description: Whether pending disposition of charges (for incarceration).
    mealsProvided:
      type: boolean
      description: Whether meals are provided by the facility.

InsurancePolicy:
  type: object
  description: Life or burial insurance policy.
  additionalProperties: false
  properties:
    policyType:
      type: string
      enum:
        - life_insurance
        - burial_insurance
    company:
      type: string
      maxLength: 200
    policyNumber:
      type: string
      maxLength: 100
    revocableOrIrrevocable:
      type: string
      enum:
        - revocable
        - irrevocable
    faceValue:
      type: number
      minimum: 0
    cashSurrenderValue:
      type: number
      minimum: 0

JobIncomeInfo:
  type: object
  description: Employment income information for eligibility determination.
  additionalProperties: false
  properties:
    employer:
      $ref: "./common.yaml#/EmployerInfo"
      description: Employer information.
    startDate:
      type: string
      format: date
      description: Date employment started.
    endDate:
      type: string
      format: date
      description: Date employment ended (omit if current job).
    monthlyWagesBeforeTaxes:
      type: number
      minimum: 0
      description: Monthly wages before taxes.
    hourlyWage:
      type: number
      minimum: 0
      description: Hourly wage rate.
    averageHoursPerWeek:
      type: number
      minimum: 0
      maximum: 168
      description: Average hours worked per week.
    payFrequency:
      type: string
      description: How often the person is paid.
      enum:
        - hourly
        - weekly
        - every_two_weeks
        - twice_monthly
        - monthly
        - yearly
        - daily
    isTemporaryJob:
      type: boolean
      description: Whether this is a temporary job.
    incomeType:
      type: string
      description: Type of employment income.
      enum:
        - seasonal_employment
        - commission_based_employment
        - regular_employment
    lastPaycheckDate:
      type: string
      format: date
      description: Date of last paycheck (for ended jobs).
    lastPaycheckAmount:
      type: number
      minimum: 0
      description: Amount of last paycheck (for ended jobs).

LumpSumPayment:
  type: object
  description: One-time lump sum payment received.
  additionalProperties: false
  properties:
    dateReceived:
      type: string
      format: date
    type:
      type: string
      enum:
        - lawsuit_settlement
        - insurance_settlement
        - social_security_ssi_ssdi_payment
        - veterans
        - inheritance
        - surrender_of_annuity
        - life_insurance_payout
        - lottery_gambling_winnings
        - other
    amount:
      type: number
      minimum: 0

MedicareInfo:
  type: object
  description: Medicare coverage information for eligibility determination.
  additionalProperties: false
  properties:
    partA:
      type: object
      additionalProperties: false
      properties:
        isEntitledOrReceiving:
          type: boolean
        startDate:
          type: string
          format: date
        isCurrentlyEnrolled:
          type: boolean
        whoPaysPremium:
          type: string
          maxLength: 200
        isPremiumFree:
          type: boolean
    partB:
      type: object
      additionalProperties: false
      properties:
        isEntitledOrReceiving:
          type: boolean
        startDate:
          type: string
          format: date
        premiumAmount:
          type: number
          minimum: 0
        whoPaysPremium:
          type: string
          maxLength: 200
    partC:
      type: object
      additionalProperties: false
      properties:
        isEntitledOrReceiving:
          type: boolean
        startDate:
          type: string
          format: date
    partD:
      type: object
      additionalProperties: false
      properties:
        isEntitledOrReceiving:
          type: boolean
        startDate:
          type: string
          format: date
        premiumAmount:
          type: number
          minimum: 0
        whoPaysPremium:
          type: string
          maxLength: 200

MortgageExpense:
  type: object
  description: Mortgage expense item.
  additionalProperties: false
  properties:
    expenseType:
      type: string
      enum:
        - mortgage
        - homeowners_insurance
        - property_taxes
        - hoa_fees
    expenseMonth:
      type: string
      format: date
    amountPaid:
      type: number
      minimum: 0

MortgageExpenses:
  type: object
  description: Mortgage expenses and settings.
  additionalProperties: false
  properties:
    receivesSection8OrPublicHousing:
      type: boolean
      description: Whether receiving Section 8 or public housing assistance.
    housingAssistanceType:
      type: string
      description: Type of housing assistance received.
      enum:
        - section8
        - public_housing
    items:
      type: array
      description: Mortgage expense items.
      items:
        $ref: "#/HousingExpenseItem"

NonCitizenApplicationInfo:
  type: object
  description: Application-specific information for non-citizens.
  additionalProperties: false
  properties:
    wantsEmergencyMedicaid:
      type: boolean
      description: Whether this person wants emergency Medicaid.
    wantsReproductiveBenefits:
      type: boolean
      description: Whether this person wants reproductive benefits.
    hasBeenAbandonedMistreatedOrAbused:
      type: boolean
      description: Whether this person has been abandoned, mistreated, or abused.
    isPregnantOr20OrYounger:
      type: boolean
      description: Whether this person is pregnant or 20 years old or younger.
    livesWithSponsor:
      type: boolean
      description: Whether this person lives with their sponsor.
    receivesFreeRoomAndBoardFromSponsor:
      type: boolean
      description: Whether this person receives free room and board from their sponsor.
    receivesSupportFromSponsor:
      type: boolean
      description: Whether this person receives support from their sponsor.

PastBenefitsFromOtherStates:
  type: object
  description: Information about SNAP or cash benefits received in another state in the last 30 days.
  additionalProperties: false
  properties:
    dateReceived:
      type: string
      format: date
      description: Date benefits were received.
    city:
      type: string
      maxLength: 100
      description: City where benefits were received.
    county:
      type: string
      maxLength: 100
      description: County where benefits were received.
    state:
      type: string
      pattern: "^[A-Z]{2}$"
      description: Two-letter state code where benefits were received.

PriorConvictionsInfo:
  type: object
  description: Prior convictions information for a person.
  additionalProperties: false
  properties:
    convictedOfDuplicateSNAPBenefits:
      type: boolean
    hidingFromLaw:
      type: boolean
    convictedOfDrugFelony:
      type: boolean
    convictedOfSNAPTrafficking:
      type: boolean
    convictedOfTradingSNAPForWeapons:
      type: boolean
    disqualifiedForIPVOrWelfareFraud:
      type: boolean
    convictedOfViolentCrime:
      type: boolean

Property:
  type: object
  description: Real estate property.
  additionalProperties: false
  properties:
    propertyType:
      type: string
      maxLength: 200
    propertyAddress:
      $ref: "./common.yaml#/Address"
    primaryPropertyUse:
      type: array
      items:
        type: string
        enum:
          - primary_home
          - rental_income
          - business_self_employment
          - other
    primaryPropertyUseOther:
      type: string
      maxLength: 200
    currentValue:
      type: number
      minimum: 0

RentExpense:
  type: object
  description: Rent expense item.
  additionalProperties: false
  properties:
    expenseType:
      type: string
      enum:
        - rent
        - renters_insurance
        - pet_fee
        - washer_dryer_fee
        - condo_fee
        - maintenance_fee
        - other
    expenseMonth:
      type: string
      format: date
    amountPaid:
      type: number
      minimum: 0

RentExpenses:
  type: object
  description: Rent expenses and settings.
  additionalProperties: false
  properties:
    utilitiesIncludedInRent:
      type: boolean
      description: Whether utilities are included in rent.
    receivesSection8OrPublicHousing:
      type: boolean
      description: Whether receiving Section 8 or public housing assistance.
    housingAssistanceType:
      type: string
      description: Type of housing assistance received.
      enum:
        - section8
        - public_housing
    items:
      type: array
      description: Rent expense items.
      items:
        $ref: "#/HousingExpenseItem"

ResourceInfo:
  type: object
  description: Financial resources and assets.
  additionalProperties: false
  properties:
    financialResources:
      type: array
      description: Financial resources owned by this person.
      items:
        $ref: "#/FinancialResource"
    vehicles:
      type: array
      description: Vehicles owned by this person.
      items:
        $ref: "#/Vehicle"
    insurancePolicies:
      type: array
      description: Life or burial insurance policies for this person.
      items:
        $ref: "#/InsurancePolicy"
    realEstateProperties:
      type: array
      description: Real estate properties owned by this person.
      items:
        $ref: "#/Property"

RetroactiveMedicalRequest:
  type: object
  description: Request for retroactive medical coverage.
  additionalProperties: false
  properties:
    months:
      type: array
      items:
        type: string
        format: date
    householdIncomeInThoseMonths:
      type: number
      minimum: 0

SelfEmploymentRecord:
  type: object
  description: Self-employment business record for eligibility determination.
  additionalProperties: false
  properties:
    businessName:
      type: string
      maxLength: 200
    oneMonthsGrossIncome:
      type: number
      minimum: 0
    monthOfIncome:
      type: string
      format: date
    selfEmploymentType:
      type: string
      enum:
        - sole_proprietor
        - llc
        - s_corp
        - independent_contractor
    utilitiesPaidForBusiness:
      type: number
      minimum: 0
    businessTaxesPaid:
      type: number
      minimum: 0
    interestPaidForBusiness:
      type: number
      minimum: 0
    grossBusinessLaborCosts:
      type: number
      minimum: 0
    costOfMerchandise:
      type: number
      minimum: 0
    otherBusinessCosts:
      type: array
      items:
        type: object
        additionalProperties: false
        properties:
          type:
            type: string
            maxLength: 200
          amount:
            type: number
            minimum: 0
    totalNetIncome:
      type: number

SocialSecurityApplication:
  type: object
  description: SSI/SSDI application record.
  additionalProperties: false
  properties:
    program:
      type: string
      enum:
        - SSI
        - SSDI
        - other
    otherProgramName:
      type: string
      maxLength: 200
    applicationDate:
      type: string
      format: date
    status:
      type: string
      enum:
        - pending
        - approved
        - denied
        - appealed

StrikeInfo:
  type: object
  description: Strike information for a person on strike.
  additionalProperties: false
  properties:
    strikeBeginDate:
      type: string
      format: date
    lastPaycheckDate:
      type: string
      format: date
    lastPaycheckAmount:
      type: number
      minimum: 0

TaxFilingInfo:
  type: object
  description: Tax filing information for a person.
  additionalProperties: false
  properties:
    willFileTaxes:
      type: boolean
    filingJointlyWithSpouse:
      type: boolean
    spouseName:
      type: string
      maxLength: 200
    willClaimDependents:
      type: boolean
    dependentsToClaim:
      type: array
      items:
        type: string
        maxLength: 200
    expectsToBeClaimedAsDependent:
      type: boolean
    isClaimedAsDependent:
      type: boolean
    nameOfPersonClaiming:
      type: string
      maxLength: 200
    isPersonClaimingListedOnApplication:
      type: boolean
    isPersonClaimingNonCustodialParent:
      type: boolean
    marriedFilingSeparatelyWithExceptionalCircumstances:
      type: boolean

TransferredAsset:
  type: object
  description: Asset that was transferred.
  additionalProperties: false
  properties:
    dateOfTransfer:
      type: string
      format: date
    assetDescription:
      type: string
      maxLength: 500
    amountReceived:
      type: number
      minimum: 0
    fairMarketValue:
      type: number
      minimum: 0

TribalInfo:
  allOf:
    - $ref: "./person.yaml#/TribalInfo"
    - type: object
      description: Tribal information extended with eligibility fields.
      properties:
        typeOfIncomeReceived:
          type: string
          maxLength: 200
          description: Type of tribal income received.
        frequencyAndAmount:
          type: string
          maxLength: 200
          description: Frequency and amount of tribal income.

UnearnedIncomeSource:
  type: object
  description: Unearned income source.
  additionalProperties: false
  properties:
    incomeType:
      type: string
      enum:
        - unemployment_benefits
        - SSI
        - veterans_benefits
        - widow_benefits
        - workers_comp
        - railroad_retirement
        - child_support
        - survivors_benefits
        - dividends_interest
        - rental_income
        - money_from_boarder
        - disability_benefits
        - retirement_pension
        - SSDI
        - alimony
        - in_kind_income
        - social_security_benefits
        - public_assistance
        - plasma_donations
        - gifts
        - loans
        - foster_care_payments
        - tribal_benefits
        - other
    monthlyAmount:
      type: number
      minimum: 0

Vehicle:
  type: object
  description: Vehicle owned by a person.
  additionalProperties: false
  properties:
    year:
      type: integer
      minimum: 1900
    make:
      type: string
      maxLength: 100
    model:
      type: string
      maxLength: 100
    currentValue:
      type: number
      minimum: 0

UtilityExpense:
  type: object
  description: Utility expense item.
  additionalProperties: false
  properties:
    utilityType:
      type: string
      enum:
        - electricity
        - gas
        - water
        - phone
        - trash
        - sewer
        - firewood
        - propane
        - other
    expenseMonth:
      type: string
      format: date
    amountPaid:
      type: number
      minimum: 0
